#!/usr/bin/env node

var poliglota = require('../src/poliglota');
var program = require('commander');
var pkg = require('../package.json');

/**
 * 	CLI
 */

program
	.version(pkg.version)
	.option('-t, --text [text]', 'Text to be translated')
	.option('-f, --from [lang]', 'Language to translate the text from')
	.option('-tl, --to [tolang]', 'Language to translate the text to')
	.on('--help', function(){
	  console.log('  Examples:');
	  console.log('');
	  console.log('    $ poliglota --text="O livro est√° sobre a mesa" --lang en');
	  console.log('');
	}).parse(process.argv);

main();

/**
 * 	Main
 */

function main () {
	if (!(program.text && program.to)) {
		program.help();
	}

	poliglota.translate(program.text, program.to).then(function (tt) {
		console.log(tt);
		process.exit(0);
	}, function (err) {
		console.log('Error translating.');
		process.exit(1);
	});
}
